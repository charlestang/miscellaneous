<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>jQuery UI Wizard Demo</title>
        <link type="text/css" href="css/redmond/jquery-ui-1.8.16.custom.css" rel="stylesheet" />	

        <script src="js/jquery-1.6.2.min.js"></script>
        <script src="js/jquery-ui-1.8.16.custom.min.js"></script>
        <script src="js/WizardDialog.js"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
        <script>
            $(function(){
                $('form').validate(); 
                $('form').FormNavigate('Do you really want to leave this page?');
                $('#x').wizardDialog({
                    autoOpen:false
                });
                $('input.w1').click(function(){
                    $('#x').wizardDialog('open');
                });
                $('input.w2').click(function(){
                    $('#x').wizardDialog('open');
                });
                $('#x').bind('wizarddialogopen', function(){
                    console.log('open wizard dialog');
                });
                $('#x').bind('wizarddialogbeforenext', function(){
                    console.log('before next');
                });
                $('#x').bind('wizarddialogbeforecancel', function(){
                    console.log('before cancel');
                });
            });
        </script>
        <style>
            .step {display:none}
            label {
                display: inline-block;
                margin-right: 10px;
                text-align: right;
                width: 95px;
            }
        </style>
    </head>
    <body>
        <input type="button" class="w1" value="Wizard"/>
        <input type="button" class="w1" value="The second Wizad"/>

        <div title="Create Filter" id="x">
            <form method="post" action="">
                <div title="Customize Filter" class="step">
                    <p><label for="name">Name:</label><input type="text" id="name" name="name" value=""/></p>
                    <p><label for="pass">Password:</label><input type="password" id="pass" name="pass" value=""/></p>
                    <p><label for="pass_repeat">Repeat:</label><input type="password" id="pass_repeat" name="pass_repeat" value=""/></p>
                </div>
                <div title="Filter Action" class="step">
                    <p><label for="phone">Phone:</label><input type="text" id="phone" name="phone" value=""/></p>
                    <p><label for="email">Email:</label><input class="email" type="text" id="email" name="email" value=""/></p>
                </div>
                <div title="Filter Action" class="step">
                    <p><label for="memo">Memo:</label><textarea id="memo" name="memo"></textarea></p>
                </div>
                <div title="Submit" class="step">
                    <p>Test. All done! Congratualations!</p>
                </div>
            </form>
        </div>
        <script>
            var global_formNavigate = true;     // Js Global Variable for onChange Flag
            (function($){
                $.fn.FormNavigate = function(message) {
                    if (!message || message == '') {
                        message = 'Do you really want to leave thie page ? ';
                    }
                    window.onbeforeunload = confirmExit;
                    function confirmExit( event ) {
                        if (global_formNavigate == true) {  event.cancelBubble = true;  }  else  { return message;  }
                    }
                    $(this+ ":input[type=text], :input[type='textarea'], :input[type='password'], :input[type='radio'], :input[type='checkbox'], :input[type='file'], select").change(function(){
                        global_formNavigate = false;
                    });
                    //to handle back button
                    $(this+ ":input[type='textarea']").keyup(function(){
                        global_formNavigate = false;
                    });
                    $(this+ ":submit").click(function(){
                        global_formNavigate = true;
                    });
                }
            })(jQuery);
        </script>
    </body>
</html>
